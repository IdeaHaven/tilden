'use strict'

angular.module('appApp.controllers')
  .controller 'WordsCtrl', ['$scope', '$http', '$location', '$timeout', ($scope, $http, $location, $timeout) ->
######################
# Variable Setup
######################

    # these were defined in AppCtrl and $scope will delegate to $rootScope
      # $scope.reps
      # $scope.selected
      # $scope.reps_list
      # $scope.STATES

    # init scoped variables
    $scope.words_by_rep = []
    $scope.word_queried = ""

    # init scoped variable with defaults
    $scope.state = {"selected":{"code":"CA","name":"California - CA"}}
    $scope.state_reps = [{"bioguide_id":"P000608","birthday":"1958-06-17","chamber":"house","contact_form":"http://scottpeters.house.gov/contact/email-me","crp_id":"N00033591","district":52,"facebook_id":"449337038470352","fax":null,"fec_ids":["H2CA52089"],"first_name":"Scott","gender":"M","govtrack_id":"412523","icpsr_id":21315,"in_office":true,"last_name":"Peters","middle_name":"H.","name_suffix":null,"nickname":null,"office":"2410 Rayburn House Office Building","party":"D","phone":"202-225-0508","state":"CA","state_name":"California","term_end":"2015-01-03","term_start":"2013-01-03","thomas_id":"02113","title":"Rep","twitter_id":"RepScottPeters","votesmart_id":70351,"website":"http://scottpeters.house.gov","full_name":"Rep. Scott Peters"},{"bioguide_id":"V000130","birthday":"1961-03-07","chamber":"house","contact_form":"http://vargas.house.gov/contact/email-me","crp_id":"N00007021","district":51,"facebook_id":"176942192453747","fax":null,"fec_ids":["H2CA50026"],"first_name":"Juan","gender":"M","govtrack_id":"412522","icpsr_id":21314,"in_office":true,"last_name":"Vargas","middle_name":null,"name_suffix":null,"nickname":null,"office":"1605 Longworth House Office Building","party":"D","phone":"202-225-8045","state":"CA","state_name":"California","term_end":"2015-01-03","term_start":"2013-01-03","thomas_id":"02112","title":"Rep","twitter_id":"RepJuanVargas","votesmart_id":29100,"website":"http://vargas.house.gov","youtube_id":"RepJuanVargas","full_name":"Rep. Juan Vargas"},{"bioguide_id":"L000579","birthday":"1941-03-08","chamber":"house","contact_form":"http://lowenthal.house.gov/contact/email-me","crp_id":"N00033274","district":47,"facebook_id":"392631677490897","fax":null,"fec_ids":["H2CA00104"],"first_name":"Alan","gender":"M","govtrack_id":"412521","icpsr_id":21313,"in_office":true,"last_name":"Lowenthal","middle_name":"S.","name_suffix":null,"nickname":null,"office":"515 Cannon House Office Building","party":"D","phone":"202-225-7924","state":"CA","state_name":"California","term_end":"2015-01-03","term_start":"2013-01-03","thomas_id":"02111","title":"Rep","twitter_id":"RepLowenthal","votesmart_id":16469,"website":"http://lowenthal.house.gov","youtube_id":"RepLowenthal","full_name":"Rep. Alan Lowenthal"},{"bioguide_id":"T000472","birthday":"1960-12-10","chamber":"house","contact_form":"http://takano.house.gov/contact/email-me","crp_id":"N00006701","district":41,"facebook_id":"262447300551014","fax":null,"fec_ids":["H2CA43245"],"first_name":"Mark","gender":"M","govtrack_id":"412520","icpsr_id":21312,"in_office":true,"last_name":"Takano","middle_name":null,"name_suffix":null,"nickname":null,"office":"1507 Longworth House Office Building","party":"D","phone":"202-225-2305","state":"CA","state_name":"California","term_end":"2015-01-03","term_start":"2013-01-03","thomas_id":"02110","title":"Rep","twitter_id":"RepMarkTakano","votesmart_id":22337,"website":"http://takano.house.gov","youtube_id":"RepMarkTakano","full_name":"Rep. Mark Takano"},{"bioguide_id":"R000599","birthday":"1972-08-25","chamber":"house","contact_form":"http://ruiz.house.gov/contact/email-me","crp_id":"N00033510","district":36,"facebook_id":"245244468941114","fax":null,"fec_ids":["H2CA36439"],"first_name":"Raul","gender":"M","govtrack_id":"412519","icpsr_id":21311,"in_office":true,"last_name":"Ruiz","middle_name":null,"name_suffix":null,"nickname":null,"office":"1319 Longworth House Office Building","party":"D","phone":"202-225-5330","state":"CA","state_name":"California","term_end":"2015-01-03","term_start":"2013-01-03","thomas_id":"02109","title":"Rep","twitter_id":"CongressmanRuiz","votesmart_id":136407,"website":"http://ruiz.house.gov","youtube_id":"repraulruiz","full_name":"Rep. Raul Ruiz"},{"bioguide_id":"N000187","birthday":"1941-09-06","chamber":"house","contact_form":"http://negretemcleod.house.gov/contact","crp_id":"N00033509","district":35,"facebook_id":"282772691776629","fax":null,"fec_ids":["H2CA35118"],"first_name":"Gloria","gender":"F","govtrack_id":"412518","icpsr_id":21310,"in_office":true,"last_name":"Negrete McLeod","middle_name":null,"name_suffix":null,"nickname":null,"office":"1641 Longworth House Office Building","party":"D","phone":"202-225-6161","state":"CA","state_name":"California","term_end":"2015-01-03","term_start":"2013-01-03","thomas_id":"02108","title":"Rep","twitter_id":"RepMcLeod","votesmart_id":16492,"website":"http://negretemcleod.house.gov","youtube_id":"NegreteMcLeod","full_name":"Rep. Gloria Negrete McLeod"},{"bioguide_id":"C001097","birthday":"1963-03-31","chamber":"house","contact_form":"http://cardenas.house.gov/contact/email-me","crp_id":"N00033373","district":29,"facebook_id":"485493954794945","fax":null,"fec_ids":["H2CA28113"],"first_name":"Tony","gender":"M","govtrack_id":"412517","icpsr_id":21309,"in_office":true,"last_name":"C치rdenas","middle_name":null,"name_suffix":null,"nickname":null,"office":"1508 Longworth House Office Building","party":"D","phone":"202-225-6131","state":"CA","state_name":"California","term_end":"2015-01-03","term_start":"2013-01-03","thomas_id":"02107","title":"Rep","twitter_id":"repcardenas","votesmart_id":9754,"website":"http://cardenas.house.gov","youtube_id":"repcardenas","full_name":"Rep. Tony C치rdenas"},{"bioguide_id":"B001285","birthday":"1952-08-28","chamber":"house","contact_form":"http://juliabrownley.house.gov/contact/email-me","crp_id":"N00034254","district":26,"facebook_id":"330504617051234","fax":null,"fec_ids":["H2CA00120"],"first_name":"Julia","gender":"F","govtrack_id":"412516","icpsr_id":21308,"in_office":true,"last_name":"Brownley","middle_name":null,"name_suffix":null,"nickname":null,"office":"1019 Longworth House Office Building","party":"D","phone":"202-225-5811","state":"CA","state_name":"California","term_end":"2015-01-03","term_start":"2013-01-03","thomas_id":"02106","title":"Rep","twitter_id":"JuliaBrownley26","votesmart_id":59904,"website":"http://juliabrownley.house.gov","youtube_id":"RepJuliaBrownley","full_name":"Rep. Julia Brownley"},{"bioguide_id":"V000129","birthday":"1977-04-14","chamber":"house","contact_form":"http://valadao.house.gov/contact","crp_id":"N00033367","district":21,"facebook_id":"105596689621089","fax":null,"fec_ids":["H2CA20094"],"first_name":"David","gender":"M","govtrack_id":"412515","icpsr_id":21307,"in_office":true,"last_name":"Valadao","middle_name":"G.","name_suffix":null,"nickname":null,"office":"1004 Longworth House Office Building","party":"R","phone":"202-225-4695","state":"CA","state_name":"California","term_end":"2015-01-03","term_start":"2013-01-03","thomas_id":"02105","title":"Rep","twitter_id":"RepDavidValadao","votesmart_id":120200,"website":"http://valadao.house.gov","youtube_id":"congressmanvaladao","full_name":"Rep. David Valadao"},{"bioguide_id":"S001193","birthday":"1980-11-16","chamber":"house","contact_form":"http://swalwell.house.gov/contact-me","crp_id":"N00033508","district":15,"facebook_id":"450130878375355","fax":null,"fec_ids":["H2CA15094"],"first_name":"Eric","gender":"M","govtrack_id":"412514","icpsr_id":21306,"in_office":true,"last_name":"Swalwell","middle_name":null,"name_suffix":null,"nickname":null,"office":"501 Cannon House Office Building","party":"D","phone":"202-225-5065","state":"CA","state_name":"California","term_end":"2015-01-03","term_start":"2013-01-03","thomas_id":"02104","title":"Rep","twitter_id":"repswalwell","votesmart_id":129529,"website":"http://swalwell.house.gov","youtube_id":"ericswalwell","full_name":"Rep. Eric Swalwell"},{"bioguide_id":"C001094","birthday":"1943-03-03","chamber":"house","contact_form":"http://cook.house.gov/contact/email-me","crp_id":"N00034224","district":8,"facebook_id":"464458413604093","fax":null,"fec_ids":["H2CA08164"],"first_name":"Paul","gender":"M","govtrack_id":"412513","icpsr_id":21305,"in_office":true,"last_name":"Cook","middle_name":null,"name_suffix":null,"nickname":null,"office":"1222 Longworth House Office Building","party":"R","phone":"202-225-5861","state":"CA","state_name":"California","term_end":"2015-01-03","term_start":"2013-01-03","thomas_id":"02103","title":"Rep","twitter_id":"RepPaulCook","votesmart_id":58121,"website":"http://cook.house.gov","youtube_id":"RepPaulCook","full_name":"Rep. Paul Cook"},{"bioguide_id":"B001287","birthday":"1965-03-02","chamber":"house","contact_form":"http://bera.house.gov/contact","crp_id":"N00030717","district":7,"facebook_id":"528662157146886","fax":null,"fec_ids":["H0CA03078"],"first_name":"Ami","gender":"M","govtrack_id":"412512","icpsr_id":21304,"in_office":true,"last_name":"Bera","middle_name":null,"name_suffix":null,"nickname":null,"office":"1408 Longworth House Office Building","party":"D","phone":"202-225-5716","state":"CA","state_name":"California","term_end":"2015-01-03","term_start":"2013-01-03","thomas_id":"02102","title":"Rep","twitter_id":"repbera","votesmart_id":120030,"website":"http://bera.house.gov","youtube_id":"repamibera","full_name":"Rep. Ami Bera"},{"bioguide_id":"H001068","birthday":"1964-02-18","chamber":"house","contact_form":"http://huffman.house.gov/contact/email-me","crp_id":"N00033030","district":2,"facebook_id":"200227780116038","fax":null,"fec_ids":["H2CA06259"],"first_name":"Jared","gender":"M","govtrack_id":"412511","icpsr_id":21303,"in_office":true,"last_name":"Huffman","middle_name":null,"name_suffix":null,"nickname":null,"office":"1630 Longworth House Office Building","party":"D","phone":"202-225-5161","state":"CA","state_name":"California","term_end":"2015-01-03","term_start":"2013-01-03","thomas_id":"02101","title":"Rep","twitter_id":"RepHuffman","votesmart_id":59849,"website":"http://huffman.house.gov","youtube_id":"rephuffman","full_name":"Rep. Jared Huffman"},{"bioguide_id":"L000578","birthday":"1960-07-02","chamber":"house","contact_form":"http://lamalfa.house.gov/contact/email-me","crp_id":"N00033987","district":1,"fax":null,"fec_ids":["H2CA02142","H2CA01144"],"first_name":"Doug","gender":"M","govtrack_id":"412510","icpsr_id":21302,"in_office":true,"last_name":"LaMalfa","middle_name":null,"name_suffix":null,"nickname":null,"office":"506 Cannon House Office Building","party":"R","phone":"202-225-3076","state":"CA","state_name":"California","term_end":"2015-01-03","term_start":"2013-01-03","thomas_id":"02100","title":"Rep","twitter_id":"RepLaMalfa","votesmart_id":29713,"website":"http://lamalfa.house.gov","youtube_id":"RepLaMalfa","full_name":"Rep. Doug LaMalfa"},{"bioguide_id":"H001063","birthday":"1952-03-30","chamber":"house","contact_form":"https://hahn.house.gov/contact-me/email-me","crp_id":"N00006806","district":44,"facebook_id":"256471267712118","fax":"202-226-7290","fec_ids":["H8CA36097"],"first_name":"Janice","gender":"F","govtrack_id":"412498","icpsr_id":21195,"in_office":true,"last_name":"Hahn","middle_name":null,"name_suffix":null,"nickname":null,"office":"404 Cannon House Office Building","party":"D","phone":"202-225-8220","state":"CA","state_name":"California","term_end":"2015-01-03","term_start":"2013-01-03","thomas_id":"02089","title":"Rep","twitter_id":"Rep_JaniceHahn","votesmart_id":70502,"website":"http://hahn.house.gov","youtube_id":"RepJaniceHahn","full_name":"Rep. Janice Hahn"},{"bioguide_id":"W000215","birthday":"1939-09-12","chamber":"house","contact_form":"http://www.henrywaxman.house.gov/contact-me/email-me","crp_id":"N00001861","district":33,"facebook_id":"129514917081997","fax":"202-225-4099","fec_ids":["H6CA24048"],"first_name":"Henry","gender":"M","govtrack_id":"400425","icpsr_id":14280,"in_office":true,"last_name":"Waxman","middle_name":"A.","name_suffix":null,"nickname":null,"office":"2204 Rayburn House Office Building","party":"D","phone":"202-225-3976","state":"CA","state_name":"California","term_end":"2015-01-03","term_start":"2013-01-03","thomas_id":"01209","title":"Rep","twitter_id":"WaxmanClimate","votesmart_id":26753,"website":"http://www.henrywaxman.house.gov","youtube_id":"RepHenryWaxman","full_name":"Rep. Henry Waxman"},{"bioguide_id":"W000187","birthday":"1938-08-15","chamber":"house","contact_form":"https://waters.house.gov/contact/contactform.htm","crp_id":"N00006690","district":43,"facebook_id":"117483585008","fax":"202-225-7854","fec_ids":["H4CA23011"],"first_name":"Maxine","gender":"F","govtrack_id":"400422","icpsr_id":29106,"in_office":true,"last_name":"Waters","middle_name":null,"name_suffix":null,"nickname":null,"office":"2221 Rayburn House Office Building","party":"D","phone":"202-225-2201","state":"CA","state_name":"California","term_end":"2015-01-03","term_start":"2013-01-03","thomas_id":"01205","title":"Rep","twitter_id":"MaxineWaters","votesmart_id":26759,"website":"http://waters.house.gov","youtube_id":"MaxineWaters","full_name":"Rep. Maxine Waters"},{"bioguide_id":"T000460","birthday":"1951-01-24","chamber":"house","contact_form":"http://mikethompson.house.gov/contact/","crp_id":"N00007419","district":5,"facebook_id":"7109195747","fax":"202-225-4335","fec_ids":["H8CA01109"],"first_name":"Mike","gender":"M","govtrack_id":"400403","icpsr_id":29901,"in_office":true,"last_name":"Thompson","middle_name":"Michael","name_suffix":null,"nickname":null,"office":"231 Cannon House Office Building","party":"D","phone":"202-225-3311","state":"CA","state_name":"California","term_end":"2015-01-03","term_start":"2013-01-03","thomas_id":"01593","title":"Rep","twitter_id":"RepThompson","votesmart_id":3564,"website":"http://mikethompson.house.gov","youtube_id":"CongressmanMThompson","full_name":"Rep. Mike Thompson"},{"bioguide_id":"S001156","birthday":"1969-01-28","chamber":"house","contact_form":"http://www.house.gov/writerep","crp_id":"N00024870","district":38,"facebook_id":"110685735673141","fax":"202-226-1012","fec_ids":["H2CA39078"],"first_name":"Linda","gender":"F","govtrack_id":"400355","icpsr_id":20310,"in_office":true,"last_name":"S치nchez","middle_name":"T.","name_suffix":null,"nickname":null,"office":"2423 Rayburn House Office Building","party":"D","phone":"202-225-6676","state":"CA","state_name":"California","term_end":"2015-01-03","term_start":"2013-01-03","thomas_id":"01757","title":"Rep","twitter_id":"replindasanchez","votesmart_id":29674,"website":"http://lindasanchez.house.gov","youtube_id":"LindaTSanchez","full_name":"Rep. Linda S치nchez"},{"bioguide_id":"S001175","birthday":"1950-05-14","chamber":"house","contact_form":"https://forms.house.gov/speier/webforms/email_jackie.shtml","crp_id":"N00029649","district":14,"facebook_id":"99332606976","fax":"202-347-0956","fec_ids":["H8CA12171"],"first_name":"Jackie","gender":"F","govtrack_id":"412259","icpsr_id":20762,"in_office":true,"last_name":"Speier","middle_name":null,"name_suffix":null,"nickname":null,"office":"211 Cannon House Office Building","party":"D","phone":"202-225-3531","state":"CA","state_name":"California","term_end":"2015-01-03","term_start":"2013-01-03","thomas_id":"01890","title":"Rep","twitter_id":"repspeier","votesmart_id":8425,"website":"http://speier.house.gov","youtube_id":"jackiespeierca12","full_name":"Rep. Jackie Speier"},{"bioguide_id":"S000344","birthday":"1954-10-24","chamber":"house","contact_form":"http://www.house.gov/sherman/contact/","crp_id":"N00006897","district":30,"facebook_id":"63158229861","fax":"202-225-5879","fec_ids":["H6CA24113"],"first_name":"Brad","gender":"M","govtrack_id":"400371","icpsr_id":29707,"in_office":true,"last_name":"Sherman","middle_name":"J.","name_suffix":null,"nickname":null,"office":"2242 Rayburn House Office Building","party":"D","phone":"202-225-5911","state":"CA","state_name":"California","term_end":"2015-01-03","term_start":"2013-01-03","thomas_id":"01526","title":"Rep","twitter_id":"BradSherman","votesmart_id":142,"website":"http://bradsherman.house.gov","youtube_id":"shermanca27","full_name":"Rep. Brad Sherman"},{"bioguide_id":"S001150","birthday":"1960-06-22","chamber":"house","contact_form":"http://schiff.house.gov/contact-me/","crp_id":"N00009585","district":28,"facebook_id":"9086721830","fax":"202-225-5828","fec_ids":["H0CA27085"],"first_name":"Adam","gender":"M","govtrack_id":"400361","icpsr_id":20104,"in_office":true,"last_name":"Schiff","middle_name":"B.","name_suffix":null,"nickname":null,"office":"2411 Rayburn House Office Building","party":"D","phone":"202-225-4176","state":"CA","state_name":"California","term_end":"2015-01-03","term_start":"2013-01-03","thomas_id":"01635","title":"Rep","twitter_id":"RepAdamSchiff","votesmart_id":9489,"website":"http://schiff.house.gov","youtube_id":"adamschiff","full_name":"Rep. Adam Schiff"},{"bioguide_id":"S000030","birthday":"1960-01-07","chamber":"house","contact_form":"http://www.lorettasanchez.house.gov/index.php?option=com_content&amp;task=view&amp;id=218&amp;Itemid=17","crp_id":"N00008274","district":46,"facebook_id":"90966961167","fax":"202-225-5859","fec_ids":["H6CA46033"],"first_name":"Loretta","gender":"F","govtrack_id":"400356","icpsr_id":29709,"in_office":true,"last_name":"Sanchez","middle_name":"B.","name_suffix":null,"nickname":null,"office":"1114 Longworth House Office Building","party":"D","phone":"202-225-2965","state":"CA","state_name":"California","term_end":"2015-01-03","term_start":"2013-01-03","thomas_id":"01522","title":"Rep","twitter_id":"lorettasanchez","votesmart_id":203,"website":"http://www.lorettasanchez.house.gov","youtube_id":"LorettaSanchezLive","full_name":"Rep. Loretta Sanchez"},{"bioguide_id":"R000487","birthday":"1951-10-12","chamber":"house","contact_form":"http://www.house.gov/writerep","crp_id":"N00008264","district":39,"facebook_id":"6460640558","fax":"202-226-0335","fec_ids":["H6CA39020"],"first_name":"Edward","gender":"M","govtrack_id":"400348","icpsr_id":29321,"in_office":true,"last_name":"Royce","middle_name":"R.","name_suffix":null,"nickname":"Ed","office":"2185 Rayburn House Office Building","party":"R","phone":"202-225-4111","state":"CA","state_name":"California","term_end":"2015-01-03","term_start":"2013-01-03","thomas_id":"00998","title":"Rep","twitter_id":"RepEdRoyce","votesmart_id":26772,"website":"http://royce.house.gov/","youtube_id":"RepEdRoyce","full_name":"Rep. Edward Royce"},{"bioguide_id":"R000486","birthday":"1941-06-12","chamber":"house","contact_form":"http://www.house.gov/writerep","crp_id":"N00006671","district":40,"facebook_id":"139773069370563","fax":"202-226-0350","fec_ids":["H2CA33048"],"first_name":"Lucille","gender":"F","govtrack_id":"400347","icpsr_id":29317,"in_office":true,"last_name":"Roybal-Allard","middle_name":null,"name_suffix":null,"nickname":null,"office":"2330 Rayburn House Office Building","party":"D","phone":"202-225-1766","state":"CA","state_name":"California","term_end":"2015-01-03","term_start":"2013-01-03","thomas_id":"00997","title":"Rep","twitter_id":"RepRoybalAllard","votesmart_id":26766,"website":"http://www.house.gov/roybal-allard","youtube_id":"RepRoybalAllard","full_name":"Rep. Lucille Roybal-Allard"},{"bioguide_id":"R000409","birthday":"1947-06-21","chamber":"house","contact_form":"http://rohrabacher.house.gov/contact-me","crp_id":"N00007151","district":48,"facebook_id":"78476240421","fax":"202-225-0145","fec_ids":["H8CA42061"],"first_name":"Dana","gender":"M","govtrack_id":"400343","icpsr_id":15621,"in_office":true,"last_name":"Rohrabacher","middle_name":"T.","name_suffix":null,"nickname":null,"office":"2300 Rayburn House Office Building","party":"R","phone":"202-225-2415","state":"CA","state_name":"California","term_end":"2015-01-03","term_start":"2013-01-03","thomas_id":"00979","title":"Rep","twitter_id":null,"votesmart_id":26763,"website":"http://rohrabacher.house.gov","youtube_id":null,"full_name":"Rep. Dana Rohrabacher"},{"bioguide_id":"P000197","birthday":"1940-03-26","chamber":"house","contact_form":"http://pelosi.house.gov/contact/email-me.shtml","crp_id":"N00007360","district":12,"facebook_id":"86574174383","fax":"202-225-8259","fec_ids":["H8CA05035"],"first_name":"Nancy","gender":"F","govtrack_id":"400314","icpsr_id":15448,"in_office":true,"last_name":"Pelosi","leadership_role":"Minority Leader","middle_name":null,"name_suffix":null,"nickname":null,"office":"235 Cannon House Office Building","party":"D","phone":"202-225-4965","state":"CA","state_name":"California","term_end":"2015-01-03","term_start":"2013-01-03","thomas_id":"00905","title":"Rep","twitter_id":"NancyPelosi","votesmart_id":26732,"website":"http://pelosi.house.gov","youtube_id":"nancypelosi","full_name":"Rep. Nancy Pelosi"},{"bioguide_id":"N000181","birthday":"1973-10-01","chamber":"house","contact_form":"https://nunes.house.gov/contactform/default.aspx","crp_id":"N00007248","district":22,"facebook_id":null,"fax":"202-225-3404","fec_ids":["H8CA20059"],"first_name":"Devin","gender":"M","govtrack_id":"400297","icpsr_id":20307,"in_office":true,"last_name":"Nunes","middle_name":"G.","name_suffix":null,"nickname":null,"office":"1013 Longworth House Office Building","party":"R","phone":"202-225-2523","state":"CA","state_name":"California","term_end":"2015-01-03","term_start":"2013-01-03","thomas_id":"01710","title":"Rep","twitter_id":"Rep_DevinNunes","votesmart_id":16725,"website":"http://nunes.house.gov","youtube_id":"RepDevinNunes","full_name":"Rep. Devin Nunes"},{"bioguide_id":"N000179","birthday":"1936-12-04","chamber":"house","contact_form":"http://napolitano.house.gov/contact-me/email-me","crp_id":"N00006789","district":32,"facebook_id":"163108420409412","fax":"202-225-0027","fec_ids":["H8CA34068"],"first_name":"Grace","gender":"F","govtrack_id":"400290","icpsr_id":29903,"in_office":true,"last_name":"Napolitano","middle_name":"F.","name_suffix":null,"nickname":null,"office":"1610 Longworth House Office Building","party":"D","phone":"202-225-5256","state":"CA","state_name":"California","term_end":"2015-01-03","term_start":"2013-01-03","thomas_id":"01602","title":"Rep","twitter_id":"gracenapolitano","votesmart_id":8393,"website":"http://napolitano.house.gov","youtube_id":"RepGraceNapolitano","full_name":"Rep. Grace Napolitano"},{"bioguide_id":"M000725","birthday":"1945-05-17","chamber":"house","contact_form":"http://georgemiller.house.gov/contact-me","crp_id":"N00007390","district":11,"facebook_id":"75298637905","fax":"202-225-5609","fec_ids":["H6CA07043"],"first_name":"George","gender":"M","govtrack_id":"400278","icpsr_id":14256,"in_office":true,"last_name":"Miller","middle_name":null,"name_suffix":null,"nickname":null,"office":"2205 Rayburn House Office Building","party":"D","phone":"202-225-2095","state":"CA","state_name":"California","term_end":"2015-01-03","term_start":"2013-01-03","thomas_id":"00808","title":"Rep","twitter_id":"askgeorge","votesmart_id":26734,"website":"http://georgemiller.house.gov","youtube_id":"RepGeorgeMiller","full_name":"Rep. George Miller"},{"bioguide_id":"M001139","birthday":"1948-10-16","chamber":"house","contact_form":"http://garymiller.house.gov/Contact/","crp_id":"N00006954","district":31,"facebook_id":"105352226181045","fax":"202-226-6962","fec_ids":["H8CA41063"],"first_name":"Gary","gender":"M","govtrack_id":"400277","icpsr_id":29905,"in_office":true,"last_name":"Miller","middle_name":"G.","name_suffix":null,"nickname":null,"office":"2467 Rayburn House Office Building","party":"R","phone":"202-225-3201","state":"CA","state_name":"California","term_end":"2015-01-03","term_start":"2013-01-03","thomas_id":"01584","title":"Rep","twitter_id":"repgarymiller","votesmart_id":8346,"website":"http://garymiller.house.gov","youtube_id":"GaryGMiller","full_name":"Rep. Gary Miller"},{"bioguide_id":"M001166","birthday":"1951-06-18","chamber":"house","contact_form":"http://mcnerney.house.gov/contact/email-me","crp_id":"N00026926","district":9,"facebook_id":"215241308510238","fax":"202-225-4060","fec_ids":["H4CA11081","H4CA11099"],"first_name":"Jerry","gender":"M","govtrack_id":"412189","icpsr_id":20702,"in_office":true,"last_name":"McNerney","middle_name":null,"name_suffix":null,"nickname":null,"office":"1210 Longworth House Office Building","party":"D","phone":"202-225-1947","state":"CA","state_name":"California","term_end":"2015-01-03","term_start":"2013-01-03","thomas_id":"01832","title":"Rep","twitter_id":"RepMcNerney","votesmart_id":29474,"website":"http://mcnerney.house.gov","youtube_id":"RepJerryMcNerney","full_name":"Rep. Jerry McNerney"},{"bioguide_id":"M000508","birthday":"1938-09-09","chamber":"house","contact_form":"http://mckeon.house.gov/contact/","crp_id":"N00006882","district":25,"facebook_id":"8138529578","fax":"202-226-0683","fec_ids":["H2CA25036"],"first_name":"Howard","gender":"M","govtrack_id":"400267","icpsr_id":29315,"in_office":true,"last_name":"McKeon","middle_name":"P.","name_suffix":null,"nickname":"Buck","office":"2310 Rayburn House Office Building","party":"R","phone":"202-225-1956","state":"CA","state_name":"California","term_end":"2015-01-03","term_start":"2013-01-03","thomas_id":"00778","title":"Rep","twitter_id":"BuckMcKeon","votesmart_id":26755,"website":"http://mckeon.house.gov","youtube_id":"BuckMcKeon","full_name":"Rep. Howard McKeon"},{"bioguide_id":"M001177","birthday":"1956-07-10","chamber":"house","contact_form":"https://mcclintockforms.house.gov/forms/contact-form.shtml","crp_id":"N00006863","district":4,"facebook_id":"81125319109","fax":"202-225-5444","fec_ids":["H8CA04152","H6CA21135"],"first_name":"Tom","gender":"M","govtrack_id":"412295","icpsr_id":20903,"in_office":true,"last_name":"McClintock","middle_name":null,"name_suffix":null,"nickname":null,"office":"434 Cannon House Office Building","party":"R","phone":"202-225-2511","state":"CA","state_name":"California","term_end":"2015-01-03","term_start":"2013-01-03","thomas_id":"01908","title":"Rep","twitter_id":"RepMcClintock","votesmart_id":9715,"website":"http://mcclintock.house.gov","youtube_id":"McClintockCA04","full_name":"Rep. Tom McClintock"},{"bioguide_id":"M001165","birthday":"1965-01-26","chamber":"house","contact_form":"https://forms.house.gov/kevinmccarthy/webforms/issue_subscribe.html","crp_id":"N00028152","district":23,"facebook_id":"51052893175","fax":"202-225-2908","fec_ids":["H6CA22125","H2CA23148"],"first_name":"Kevin","gender":"M","govtrack_id":"412190","icpsr_id":20703,"in_office":true,"last_name":"McCarthy","leadership_role":"Majority Whip","middle_name":null,"name_suffix":null,"nickname":null,"office":"2421 Rayburn House Office Building","party":"R","phone":"202-225-2915","state":"CA","state_name":"California","term_end":"2015-01-03","term_start":"2013-01-03","thomas_id":"01833","title":"Rep","twitter_id":"GOPWhip","votesmart_id":28918,"website":"http://kevinmccarthy.house.gov","youtube_id":"repkevinmccarthy","full_name":"Rep. Kevin McCarthy"},{"bioguide_id":"M001163","birthday":"1944-09-25","chamber":"house","contact_form":"https://forms.house.gov/matsui/webforms/issue_subscribe.htm","crp_id":"N00027459","district":6,"facebook_id":"doris.matsui","fax":"202-225-0566","fec_ids":["H6CA05195"],"first_name":"Doris","gender":"F","govtrack_id":"400663","icpsr_id":20538,"in_office":true,"last_name":"Matsui","middle_name":"O.","name_suffix":null,"nickname":null,"office":"2434 Rayburn House Office Building","party":"D","phone":"202-225-7163","state":"CA","state_name":"California","term_end":"2015-01-03","term_start":"2013-01-03","thomas_id":"01814","title":"Rep","twitter_id":"DorisMatsui","votesmart_id":28593,"website":"http://matsui.house.gov","youtube_id":"RepDorisMatsui","full_name":"Rep. Doris Matsui"},{"bioguide_id":"L000397","birthday":"1947-12-21","chamber":"house","contact_form":"http://forms.house.gov/lofgren/webforms/landing.html","crp_id":"N00007479","district":19,"facebook_id":"221191600719","fax":"202-225-3336","fec_ids":["H4CA16049"],"first_name":"Zoe","gender":"F","govtrack_id":"400245","icpsr_id":29504,"in_office":true,"last_name":"Lofgren","middle_name":null,"name_suffix":null,"nickname":null,"office":"1401 Longworth House Office Building","party":"D","phone":"202-225-3072","state":"CA","state_name":"California","term_end":"2015-01-03","term_start":"2013-01-03","thomas_id":"00701","title":"Rep","twitter_id":"RepZoeLofgren","votesmart_id":21899,"website":"http://lofgren.house.gov/","youtube_id":null,"full_name":"Rep. Zoe Lofgren"},{"bioguide_id":"L000551","birthday":"1946-07-16","chamber":"house","contact_form":"http://lee.house.gov/?sectionid=44&amp;sectiontree=18,44","crp_id":"N00008046","district":13,"facebook_id":"92190287786","fax":"202-225-9817","fec_ids":["H8CA09060"],"first_name":"Barbara","gender":"F","govtrack_id":"400237","icpsr_id":29778,"in_office":true,"last_name":"Lee","middle_name":null,"name_suffix":null,"nickname":null,"office":"2267 Rayburn House Office Building","party":"D","phone":"202-225-2661","state":"CA","state_name":"California","term_end":"2015-01-03","term_start":"2013-01-03","thomas_id":"01501","title":"Rep","twitter_id":"repbarbaralee","votesmart_id":8315,"website":"http://lee.house.gov","youtube_id":"RepLee","full_name":"Rep. Barbara Lee"},{"bioguide_id":"I000056","birthday":"1953-11-01","chamber":"house","contact_form":"http://issa.house.gov/contact/contact-me","crp_id":"N00007017","district":49,"facebook_id":"19463427992","fax":"202-225-3303","fec_ids":["H0CA48024","S8CA00135"],"first_name":"Darrell","gender":"M","govtrack_id":"400196","icpsr_id":20107,"in_office":true,"last_name":"Issa","middle_name":"E.","name_suffix":null,"nickname":null,"office":"2347 Rayburn House Office Building","party":"R","phone":"202-225-3906","state":"CA","state_name":"California","term_end":"2015-01-03","term_start":"2013-01-03","thomas_id":"01640","title":"Rep","twitter_id":"DarrellIssa","votesmart_id":16553,"website":"http://issa.house.gov/","youtube_id":"repdarrellissa","full_name":"Rep. Darrell Issa"},{"bioguide_id":"H001048","birthday":"1976-12-07","chamber":"house","contact_form":"http://hunter.house.gov/contact-me/email-me","crp_id":"N00029258","district":50,"facebook_id":"79072979038","fax":"202-225-0235","fec_ids":["H8CA52052"],"first_name":"Duncan","gender":"M","govtrack_id":"412283","icpsr_id":20963,"in_office":true,"last_name":"Hunter","middle_name":"D.","name_suffix":null,"nickname":null,"office":"223 Cannon House Office Building","party":"R","phone":"202-225-5672","state":"CA","state_name":"California","term_end":"2015-01-03","term_start":"2013-01-03","thomas_id":"01909","title":"Rep","twitter_id":"Rep_Hunter","votesmart_id":104308,"website":"http://hunter.house.gov","youtube_id":"CongressmanHunter","full_name":"Rep. Duncan Hunter"},{"bioguide_id":"H001034","birthday":"1941-06-27","chamber":"house","contact_form":"http://honda.house.gov/contactmike.shtml","crp_id":"N00012611","district":17,"facebook_id":"15675385380","fax":"202-225-2699","fec_ids":["H0CA15148"],"first_name":"Michael","gender":"M","govtrack_id":"400185","icpsr_id":20103,"in_office":true,"last_name":"Honda","middle_name":"M.","name_suffix":null,"nickname":"Mike","office":"1713 Longworth House Office Building","party":"D","phone":"202-225-2631","state":"CA","state_name":"California","term_end":"2015-01-03","term_start":"2013-01-03","thomas_id":"01634","title":"Rep","twitter_id":"RepMikeHonda","votesmart_id":9674,"website":"http://www.house.gov/honda","youtube_id":"RepMikeHonda","full_name":"Rep. Michael Honda"},{"bioguide_id":"G000559","birthday":"1945-01-24","chamber":"house","contact_form":"http://garamendi.house.gov/contact-me/email-me","crp_id":"N00030856","district":3,"facebook_id":"182567716746","fax":"202-225-5914","fec_ids":["H0CA10149"],"first_name":"John","gender":"M","govtrack_id":"412382","icpsr_id":20958,"in_office":true,"last_name":"Garamendi","middle_name":null,"name_suffix":null,"nickname":null,"office":"2438 Rayburn House Office Building","party":"D","phone":"202-225-1880","state":"CA","state_name":"California","term_end":"2015-01-03","term_start":"2013-01-03","thomas_id":"01973","title":"Rep","twitter_id":"RepGaramendi","votesmart_id":29664,"website":"http://garamendi.house.gov","youtube_id":"garamendiCA10","full_name":"Rep. John Garamendi"},{"bioguide_id":"F000030","birthday":"1941-07-04","chamber":"house","contact_form":"http://www.farr.house.gov/index.php?option=com_content&amp;task=view&amp;id=202","crp_id":"N00007312","district":20,"facebook_id":"7018136294","fax":"202-225-6791","fec_ids":["H4CA17021"],"first_name":"Sam","gender":"M","govtrack_id":"400129","icpsr_id":29313,"in_office":true,"last_name":"Farr","middle_name":null,"name_suffix":null,"nickname":null,"office":"1126 Longworth House Office Building","party":"D","phone":"202-225-2861","state":"CA","state_name":"California","term_end":"2015-01-03","term_start":"2013-01-03","thomas_id":"00368","title":"Rep","twitter_id":"RepSamFarr","votesmart_id":26745,"website":"http://www.house.gov/farr","youtube_id":"CongressmanSamFarr","full_name":"Rep. Sam Farr"},{"bioguide_id":"E000215","birthday":"1942-12-13","chamber":"house","contact_form":"https://forms.house.gov/eshoo/webforms/issue_subscribe.htm","crp_id":"N00007335","district":18,"facebook_id":"174979964227","fax":"202-225-8890","fec_ids":["H8CA12098"],"first_name":"Anna","gender":"F","govtrack_id":"400124","icpsr_id":29312,"in_office":true,"last_name":"Eshoo","middle_name":"G.","name_suffix":null,"nickname":null,"office":"241 Cannon House Office Building","party":"D","phone":"202-225-8104","state":"CA","state_name":"California","term_end":"2015-01-03","term_start":"2013-01-03","thomas_id":"00355","title":"Rep","twitter_id":"RepAnnaEshoo","votesmart_id":26741,"website":"http://eshoo.house.gov","youtube_id":"RepAnnaEshoo","full_name":"Rep. Anna Eshoo"},{"bioguide_id":"D000612","birthday":"1967-07-29","chamber":"house","contact_form":"http://denham.house.gov/contact-me/email-me","crp_id":"N00031593","district":10,"facebook_id":"133714040028137","fax":"202-225-3402","fec_ids":["H0CA19173"],"first_name":"Jeff","gender":"M","govtrack_id":"412403","icpsr_id":21109,"in_office":true,"last_name":"Denham","middle_name":null,"name_suffix":null,"nickname":null,"office":"1730 Longworth House Office Building","party":"R","phone":"202-225-4540","state":"CA","state_name":"California","term_end":"2015-01-03","term_start":"2013-01-03","thomas_id":"01995","title":"Rep","twitter_id":"RepJeffDenham","votesmart_id":28769,"website":"http://denham.house.gov","youtube_id":"repjeffdenham","full_name":"Rep. Jeff Denham"},{"bioguide_id":"D000598","birthday":"1944-04-13","chamber":"house","contact_form":"http://www.house.gov/susandavis/contact.shtml","crp_id":"N00009604","district":53,"facebook_id":"103767526332478","fax":"202-225-2948","fec_ids":["H0CA49055"],"first_name":"Susan","gender":"F","govtrack_id":"400097","icpsr_id":20108,"in_office":true,"last_name":"Davis","middle_name":"A.","name_suffix":null,"nickname":null,"office":"1526 Longworth House Office Building","party":"D","phone":"202-225-2040","state":"CA","state_name":"California","term_end":"2015-01-03","term_start":"2013-01-03","thomas_id":"01641","title":"Rep","twitter_id":"RepSusanDavis","votesmart_id":8168,"website":"http://www.house.gov/susandavis","youtube_id":null,"full_name":"Rep. Susan Davis"},{"bioguide_id":"C001059","birthday":"1952-04-13","chamber":"house","contact_form":"http://www.house.gov/formcosta/issue.htm","crp_id":"N00026341","district":16,"facebook_id":"RepJimCosta","fax":"202-225-9308","fec_ids":["H4CA20082"],"first_name":"Jim","gender":"M","govtrack_id":"400618","icpsr_id":20501,"in_office":true,"last_name":"Costa","middle_name":null,"name_suffix":null,"nickname":null,"office":"1314 Longworth House Office Building","party":"D","phone":"202-225-3341","state":"CA","state_name":"California","term_end":"2015-01-03","term_start":"2013-01-03","thomas_id":"01774","title":"Rep","twitter_id":"repjimcosta","votesmart_id":3577,"website":"http://costa.house.gov","youtube_id":"RepJimCostaCA20","full_name":"Rep. Jim Costa"},{"bioguide_id":"C001080","birthday":"1953-07-07","chamber":"house","contact_form":"http://chu.house.gov/connect-with-me/email-judy","crp_id":"N00030600","district":27,"facebook_id":"41228315130","fax":"202-225-5467","fec_ids":["H0CA32101"],"first_name":"Judy","gender":"F","govtrack_id":"412379","icpsr_id":20955,"in_office":true,"last_name":"Chu","middle_name":"M.","name_suffix":null,"nickname":null,"office":"1520 Longworth House Office Building","party":"D","phone":"202-225-5464","state":"CA","state_name":"California","term_end":"2015-01-03","term_start":"2013-01-03","thomas_id":"01970","title":"Rep","twitter_id":"RepJudyChu","votesmart_id":16539,"website":"http://chu.house.gov","youtube_id":"RepJudyChu","full_name":"Rep. Judy Chu"},{"bioguide_id":"C001036","birthday":"1938-01-10","chamber":"house","contact_form":"http://capps.house.gov/contact-me/email-me","crp_id":"N00007232","district":24,"facebook_id":"168989481141","fax":"202-225-5632","fec_ids":["H8CA22089"],"first_name":"Lois","gender":"F","govtrack_id":"400062","icpsr_id":29774,"in_office":true,"last_name":"Capps","middle_name":null,"name_suffix":null,"nickname":null,"office":"2231 Rayburn House Office Building","party":"D","phone":"202-225-3601","state":"CA","state_name":"California","term_end":"2015-01-03","term_start":"2013-01-03","thomas_id":"01471","title":"Rep","twitter_id":"RepLoisCapps","votesmart_id":16886,"website":"http://capps.house.gov","youtube_id":"reploiscapps","full_name":"Rep. Lois Capps"},{"bioguide_id":"C001064","birthday":"1955-07-19","chamber":"house","contact_form":"https://forms.house.gov/campbell/webforms/issue_subscribe.htm","crp_id":"N00027565","district":45,"facebook_id":"60546090739","fax":"202-225-9177","fec_ids":["H6CA48039"],"first_name":"John","gender":"M","govtrack_id":"412011","icpsr_id":20539,"in_office":true,"last_name":"Campbell","middle_name":"Bayard Taylor","name_suffix":"III","nickname":null,"office":"2331 Rayburn House Office Building","party":"R","phone":"202-225-5611","state":"CA","state_name":"California","term_end":"2015-01-03","term_start":"2013-01-03","thomas_id":"01816","title":"Rep","twitter_id":"RepJohnCampbell","votesmart_id":29368,"website":"http://www.campbell.house.gov","youtube_id":"RepJohnCampbellCA48","full_name":"Rep. John Campbell"},{"bioguide_id":"C000059","birthday":"1953-06-08","chamber":"house","contact_form":"http://calvert.house.gov/contact/","crp_id":"N00007099","district":42,"facebook_id":"70063393423","fax":"202-225-2004","fec_ids":["H2CA37023"],"first_name":"Ken","gender":"M","govtrack_id":"400057","icpsr_id":29323,"in_office":true,"last_name":"Calvert","middle_name":"S.","name_suffix":null,"nickname":null,"office":"2269 Rayburn House Office Building","party":"R","phone":"202-225-1986","state":"CA","state_name":"California","term_end":"2015-01-03","term_start":"2013-01-03","thomas_id":"00165","title":"Rep","twitter_id":"KenCalvert","votesmart_id":26777,"website":"http://calvert.house.gov","youtube_id":"RepKenCalvert","full_name":"Rep. Ken Calvert"},{"bioguide_id":"B000711","birthday":"1940-11-11","chamber":"senate","contact_form":"http://www.boxer.senate.gov/en/contact/","crp_id":"N00006692","district":null,"facebook_id":"116513005087055","fax":"202-224-0454","fec_ids":["S2CA00286","H2CA06028","P80003247"],"first_name":"Barbara","gender":"F","govtrack_id":"300011","icpsr_id":15011,"in_office":true,"last_name":"Boxer","lis_id":"S223","middle_name":null,"name_suffix":null,"nickname":null,"office":"112 Hart Senate Office Building","party":"D","phone":"202-224-3553","senate_class":3,"state":"CA","state_name":"California","state_rank":"junior","term_end":"2017-01-03","term_start":"2011-01-05","thomas_id":"00116","title":"Sen","twitter_id":"senatorboxer","votesmart_id":53274,"website":"http://www.boxer.senate.gov","youtube_id":"SenatorBoxer","full_name":"Sen. Barbara Boxer"},{"bioguide_id":"B000287","birthday":"1958-01-26","chamber":"house","contact_form":"https://forms.house.gov/becerra/webforms/issue_subscribe.html","crp_id":"N00009774","district":34,"facebook_id":"90311772229","fax":"202-225-2202","fec_ids":["H2CA30143"],"first_name":"Xavier","gender":"M","govtrack_id":"400021","icpsr_id":29316,"in_office":true,"last_name":"Becerra","middle_name":null,"name_suffix":null,"nickname":null,"office":"1226 Longworth House Office Building","party":"D","phone":"202-225-6235","state":"CA","state_name":"California","term_end":"2015-01-03","term_start":"2013-01-03","thomas_id":"00070","title":"Rep","twitter_id":"repbecerra","votesmart_id":26754,"website":"http://becerra.house.gov","youtube_id":"XavierBecerra","full_name":"Rep. Xavier Becerra"},{"bioguide_id":"B001270","birthday":"1953-10-03","chamber":"house","contact_form":"http://bass.house.gov/contact-me/email-me","crp_id":"N00031877","district":37,"facebook_id":"190867440939405","fax":"202- 225-2422","fec_ids":["H0CA33117"],"first_name":"Karen","gender":"F","govtrack_id":"412404","icpsr_id":21110,"in_office":true,"last_name":"Bass","middle_name":null,"name_suffix":null,"nickname":null,"office":"408 Cannon House Office Building","party":"D","phone":"202-225-7084","state":"CA","state_name":"California","term_end":"2015-01-03","term_start":"2013-01-03","thomas_id":"01996","title":"Rep","twitter_id":"RepKarenBass","votesmart_id":28963,"website":"http://bass.house.gov","youtube_id":"RepKarenBass","full_name":"Rep. Karen Bass"},{"bioguide_id":"F000062","birthday":"1933-06-22","chamber":"senate","contact_form":"http://www.feinstein.senate.gov/public/index.cfm/e-mail-me","crp_id":"N00007364","district":null,"facebook_id":"334887279867783","fax":"202-228-3954","fec_ids":["S0CA00199"],"first_name":"Dianne","gender":"F","govtrack_id":"300043","icpsr_id":49300,"in_office":true,"last_name":"Feinstein","lis_id":"S221","middle_name":null,"name_suffix":null,"nickname":null,"office":"331 Hart Senate Office Building","party":"D","phone":"202-224-3841","senate_class":1,"state":"CA","state_name":"California","state_rank":"senior","term_end":"2019-01-03","term_start":"2013-01-03","thomas_id":"01332","title":"Sen","twitter_id":"senfeinstein","votesmart_id":53273,"website":"http://www.feinstein.senate.gov","youtube_id":"SenatorFeinstein","full_name":"Sen. Dianne Feinstein"}]
    $scope.rep = $scope.state_reps[26]
    $scope.words_queried = [
      {ngram: "Liberty", count: 24601}
      {ngram: "Terrorism", count: 51846}
      {ngram: "NSA", count: 1302}
      {ngram: "Football", count: 12516}
      {ngram: "Spying", count: 849}
    ]

######################
# Define API Methods
######################

    $scope.getRepWords = (bioguide_id)->
      tempurl = "http://capitolwords.org/api/1/phrases.json?entity_type=legislator&entity_value=#{bioguide_id}&apikey=3cdfa27b289e4d4090fd1b176c45e6cf"
      $http(
        method: "GET"
        url: "http://query.yahooapis.com/v1/public/yql"
        params:
          q: "select * from json where url=\'#{tempurl}\'"
          format: "json"
      ).success((data, status) ->
        unsortedWords = $scope.stringToIntForWordCount(data.query.results.json.json)
        $scope.words_by_rep = _.sortBy(unsortedWords, ((val)->val.count*-1)).splice(0,15)
      ).error (data, status) ->
        console.log "Error #{status}: #{data}"

    $scope.getRepList = (stateCode)->
      $http(
        method: "GET"
        url: "http://congress.api.sunlightfoundation.com/legislators?state=#{stateCode}&per_page=all&apikey=3cdfa27b289e4d4090fd1b176c45e6cf"
      ).success((data, status) ->
        $scope.state_reps = $scope.makeRepFullName(data.results)
      ).error (data, status) ->
        console.log "Error #{status}: #{data}"

    $scope.getWordFrequency = (word_queried)->
      tempurl = "http://capitolwords.org/api/1/dates.json?phrase=#{word_queried.replace(/\s/g, '+')}&apikey=3cdfa27b289e4d4090fd1b176c45e6cf"
      $http(
        method: "GET"
        url: "http://query.yahooapis.com/v1/public/yql"
        params:
          q: "select * from json where url=\'#{tempurl}\'"
          format: "json"
      ).success((data, status) ->
        # get full count
        if data.query.results.json
          array = data.query.results.json.results
          i = 0
          count = 0
          while i < array.length
            count += Number(array[i].count)
            i++
            count
        # if no results, word was not said
        else count = 0
        # push to array of responses
        $scope.words_queried.unshift
          ngram: word_queried
          count: count
      ).error (data, status) ->
        console.log "Error #{status}: #{data}"

######################
# Define non-API Methods
######################

    $scope.onStateSelect = (item, model, label)->
      $scope.getRepList(item.code)

    $scope.onRepSelect = (rep)->
      # reset words array
      $scope.words_by_rep = []
      # get new words
      $scope.getRepWords(rep.bioguide_id)

    $scope.wordQuery = ()->
      # api call with word queries
      $scope.getWordFrequency $scope.word_queried
      # reset input box to null
      $scope.word_queried = null

    $scope.stringToIntForWordCount = (array) ->
      i = 0
      while i < array.length
        array[i].count = Number(array[i].count)
        i++
      return array

    $scope.makeRepFullName = (array) ->
      i = 0
      while i < array.length
        array[i].full_name = "#{array[i].title}. #{array[i].first_name} #{array[i].last_name}"
        i++
      return array

######################
# Init Page
######################

    # this will not register as a change so call it to init the page
    $scope.onRepSelect($scope.rep)

  ]
